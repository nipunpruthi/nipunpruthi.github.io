{{ define "title" }}{{ .Title }} | {{ .Site.Title }}{{ end }}
{{ define "main" }}
<article class="page experience-page">
  <h1>{{ .Title }}</h1>
  {{ with .Content }}
  <div class="experience-intro">{{ . }}</div>
  {{ end }}
  <ol class="timeline">
    {{ range .Site.Data.experience.entries }}
    {{ $e := . }}
    <li class="timeline-item">
      <span class="timeline-marker" aria-hidden="true"></span>
      <div class="timeline-content">
        <div class="timeline-head-row">
          <div class="timeline-head-left">
            {{ with $e.icon }}
            <div class="timeline-company-icon-wrap">
              <img class="timeline-company-icon" src="{{ . | relURL }}" alt="" loading="lazy">
            </div>
            {{ end }}
            <h2 class="timeline-role">
              {{ $e.role }}{{ with $e.company }} @ {{ if $e.company_url }}<a href="{{ $e.company_url }}" target="_blank" rel="noopener" class="timeline-company-link">{{ $e.company }}</a>{{ else }}<span class="timeline-company">{{ $e.company }}</span>{{ end }}{{ end }}
            </h2>
          </div>
          <div class="timeline-period">{{ $e.start }} â€” {{ $e.end }}</div>
        </div>
        {{ if or $e.description $e.location }}
        <div class="timeline-meta-row">
          {{ with $e.description }}<p class="timeline-description">{{ . }}</p>{{ end }}
          {{ with $e.location }}<span class="timeline-location"><span class="timeline-location-icon">{{ partial "icon-pin.html" $ }}</span>{{ . }}</span>{{ end }}
        </div>
        {{ end }}
        {{ with $e.tech }}
        <div class="timeline-tech">
          {{ range . }}<span class="timeline-tag">{{ . }}</span>{{ end }}
        </div>
        {{ end }}
        {{ if $e.more }}
        <details class="timeline-details">
          <summary class="timeline-details-summary">More</summary>
          <div class="timeline-details-content">
            {{ range $e.more }}
            <div class="timeline-project">
              {{ with .name }}<h3 class="timeline-project-name">{{ . }}</h3>{{ end }}
              {{ with .details }}<ul class="timeline-project-details">{{ range . }}<li>{{ . }}</li>{{ end }}</ul>{{ end }}
            </div>
            {{ end }}
          </div>
        </details>
        {{ else if $e.details }}
        <details class="timeline-details">
          <summary class="timeline-details-summary">More</summary>
          <div class="timeline-details-content">{{ $e.details | markdownify }}</div>
        </details>
        {{ end }}
      </div>
    </li>
    {{ end }}
  </ol>
</article>
{{ end }}
